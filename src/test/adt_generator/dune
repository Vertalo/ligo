(rule
  (targets generated_fold.ml generated_map.ml generated_o.ml)
  (deps ../../../src/stages/adt_generator/generator.raku amodule.ml)
  (action (run perl6 ../../../src/stages/adt_generator/generator.raku amodule.ml Generated_o generated_o.ml generated_fold.ml generated_map.ml))
  (mode (promote (until-clean) (only *)))
)

(executable
  (name test_adt_generator)
  (libraries adt_generator simple-utils)
  (preprocess
    (pps ppx_let bisect_ppx --conditional)
  )
)

(alias
  (name runtest)
  (action (run ./test_adt_generator.exe))
)
