(rule
  (target generated_fold.ml)
  (deps ../../../src/stages/adt_generator/generator.raku amodule.ml)
  (action (with-stdout-to generated_fold.ml (run perl6 ../../../src/stages/adt_generator/generator.raku amodule.ml)))
;  (mode (promote (until-clean)))
)

(executable
  (name test_adt_generator)
  (public_name ligo.test_adt_generator)
  (libraries adt_generator simple-utils)
  (preprocess
    (pps ppx_let bisect_ppx --conditional)
  )
)

(alias
  (name runtest)
  (action (run ./test_adt_generator.exe))
)
